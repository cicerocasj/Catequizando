{% extends 'base/base.html' %}
{% set formacao=formacao or None %}
{% set errors=errors or None %}
{% block header_title %}
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="area-top clearfix">
                <div class="pull-left header">
                    <h3 class="title">
                        <i class="icon-info-sign"></i>
                        Administração
                    </h3>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block js_head %}
    <script src="/static/angular/js/angular.min.js" type="text/javascript"></script>
    <script>
    var formacao_app = angular.module("formacao_app", []);
    formacao_app.config(function($interpolateProvider){
        $interpolateProvider.startSymbol('{[').endSymbol(']}');
    });

    formacao_app.controller('CtrlFormacao', function ($scope, $http){
        var formacoes = $scope.formacoes = {{ formacaos|safe or [] }};
        var a = 1;
    });

    formacao_app.directive('itemFormacao', function(){
        return {
            restrict: 'A',
            templateUrl: '/static/angular/directives/item_formacao.html'
        };
    });
    </script>
{% endblock %}

{% block body %}
    <div class="container-fluid padded" ng-app="formacao_app" ng-controller="CtrlFormacao">
        <div class="row-fluid">
            <div class="col-md-12">
                <div class="span12">
                    <div class="box">
                        <div class="box-header">
                            <span class="title">Formulário</span>
                        </div>
                        <div class="box-content">
                            <div class="well">
                                <form action="{{ save_path }}" method="post" role="form">
                                    {{ csrf_input() }}
                                    {{ form_input(_('Titulo'),'titulo',formacao.titulo,errors.titulo) }}
                                    {{ form_input(_('Data'),'data',formacao.data,errors.data) }}
                                    {{ form_input(_('Conteudo'),'conteudo',formacao.conteudo,errors.conteudo) }}
                                    <button type="submit" class="btn btn-success">{% trans %}Save{% endtrans %}</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="box">
                        <div class="box-header">
                            <span class="title">{% trans %}Security Table{% endtrans %}</span>
                        </div>
                        <div class="box-content">
                            <table class="table table-striped table-hover">
                                <thead>
                                <tr>
                                    <th/>
                                    <th>{% trans %}Creation{% endtrans %}</th>
                                    <th>{% trans %}Titulo{% endtrans %}</th>
                                    <th>{% trans %}Data{% endtrans %}</th>
                                    <th>{% trans %}Conteudo{% endtrans %}</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr item-formacao ng-repeat="formacao in formacoes"></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}